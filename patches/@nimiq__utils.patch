diff --git a/dist/albatross-policy/albatross-policy.cjs b/dist/albatross-policy/albatross-policy.cjs
index e25febcdd8bf06349aaab69e5bf8b150d58eba64..0a3d720315d237f652d2182d5c3e4bd5f6e85165 100644
--- a/dist/albatross-policy/albatross-policy.cjs
+++ b/dist/albatross-policy/albatross-policy.cjs
@@ -1,61 +1,72 @@
 'use strict';
 
-const constants = require('../shared/utils.CGhj4cNk.cjs');
+const constants = require('../shared/utils.BtI8VHas.cjs');
 
-function epochAt(blockNumber) {
-  if (blockNumber <= constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return 0;
-  const offset = blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+function epochAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber <= migrationBlock) return 0;
+  const offset = blockNumber - migrationBlock;
   return Math.floor((offset + constants.BLOCKS_PER_EPOCH - 1) / constants.BLOCKS_PER_EPOCH);
 }
-function epochIndexAt(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return blockNumber;
-  return (blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK) % constants.BLOCKS_PER_EPOCH;
+function epochIndexAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return blockNumber;
+  return (blockNumber - migrationBlock) % constants.BLOCKS_PER_EPOCH;
 }
-function batchAt(blockNumber) {
-  if (blockNumber <= constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return 0;
-  const offset = blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+function batchAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber <= migrationBlock) return 0;
+  const offset = blockNumber - migrationBlock;
   return Math.floor((offset + constants.BLOCKS_PER_BATCH - 1) / constants.BLOCKS_PER_BATCH);
 }
-function batchIndexAt(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return blockNumber;
-  return (blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK) % constants.BLOCKS_PER_BATCH;
+function batchIndexAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return blockNumber;
+  return (blockNumber - migrationBlock) % constants.BLOCKS_PER_BATCH;
 }
-function isMacroBlockAt(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return false;
-  return batchIndexAt(blockNumber) === constants.BLOCKS_PER_BATCH - 1;
+function isMacroBlockAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return false;
+  return batchIndexAt(blockNumber, options) === constants.BLOCKS_PER_BATCH - 1;
 }
 function isElectionBlockAt(blockNumber) {
   return epochIndexAt(blockNumber) === constants.BLOCKS_PER_EPOCH - 1;
 }
-function isMicroBlockAt(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return false;
-  return !isMacroBlockAt(blockNumber);
-}
-function macroBlockAfter(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-  const offset = blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return (Math.floor(offset / constants.BLOCKS_PER_BATCH) + 1) * constants.BLOCKS_PER_BATCH + constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function lastMacroBlock(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) throw new Error("No macro blocks before genesis");
-  const offset = blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return Math.floor(offset / constants.BLOCKS_PER_BATCH) * constants.BLOCKS_PER_BATCH + constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function electionBlockAfter(blockNumber) {
-  if (blockNumber < constants.PROOF_OF_STAKE_MIGRATION_BLOCK) return constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-  const offset = blockNumber - constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return (Math.floor(offset / constants.BLOCKS_PER_EPOCH) + 1) * constants.BLOCKS_PER_EPOCH + constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function firstBlockOf(epoch) {
+function isMicroBlockAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return false;
+  return !isMacroBlockAt(blockNumber, options);
+}
+function macroBlockAfter(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return migrationBlock;
+  const offset = blockNumber - migrationBlock;
+  return (Math.floor(offset / constants.BLOCKS_PER_BATCH) + 1) * constants.BLOCKS_PER_BATCH + migrationBlock;
+}
+function lastMacroBlock(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) throw new Error("No macro blocks before proof-of-stake migration");
+  const offset = blockNumber - migrationBlock;
+  return Math.floor(offset / constants.BLOCKS_PER_BATCH) * constants.BLOCKS_PER_BATCH + migrationBlock;
+}
+function electionBlockAfter(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return migrationBlock;
+  const offset = blockNumber - migrationBlock;
+  return (Math.floor(offset / constants.BLOCKS_PER_EPOCH) + 1) * constants.BLOCKS_PER_EPOCH + migrationBlock;
+}
+function firstBlockOf(epoch, options = {}) {
   if (epoch <= 0) return undefined;
-  return (epoch - 1) * constants.BLOCKS_PER_EPOCH + constants.PROOF_OF_STAKE_MIGRATION_BLOCK + 1;
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  return (epoch - 1) * constants.BLOCKS_PER_EPOCH + migrationBlock + 1;
 }
 function blockAfterJail(blockNumber) {
   return blockNumber + constants.BLOCKS_PER_EPOCH * constants.JAIL_EPOCHS + 1;
 }
-function electionBlockOf(epoch) {
+function electionBlockOf(epoch, options = {}) {
   if (epoch < 0) return undefined;
-  return constants.PROOF_OF_STAKE_MIGRATION_BLOCK + (epoch + 1) * constants.BLOCKS_PER_EPOCH - 1;
+  const migrationBlock = options.testnet ? constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+  return migrationBlock + (epoch + 1) * constants.BLOCKS_PER_EPOCH - 1;
 }
 function batchDelayPenalty(delayMs) {
   return (1 - constants.MINIMUM_REWARDS_PERCENTAGE) * (constants.BLOCKS_DELAY_DECAY ** delayMs) ** delayMs + constants.MINIMUM_REWARDS_PERCENTAGE;
@@ -92,6 +103,7 @@ exports.MIN_EPOCHS_STORED = constants.MIN_EPOCHS_STORED;
 exports.MIN_PRODUCER_TIMEOUT = constants.MIN_PRODUCER_TIMEOUT;
 exports.POS_DECAY_PER_DAY = constants.POS_DECAY_PER_DAY;
 exports.PROOF_OF_STAKE_MIGRATION_BLOCK = constants.PROOF_OF_STAKE_MIGRATION_BLOCK;
+exports.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = constants.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET;
 exports.PROOF_OF_STAKE_MIGRATION_DATE = constants.PROOF_OF_STAKE_MIGRATION_DATE;
 exports.PROOF_OF_WORK_EMISSION_SPEED = constants.PROOF_OF_WORK_EMISSION_SPEED;
 exports.PROOF_OF_WORK_EMISSION_TAIL_REWARD = constants.PROOF_OF_WORK_EMISSION_TAIL_REWARD;
diff --git a/dist/albatross-policy/albatross-policy.d.cts b/dist/albatross-policy/albatross-policy.d.cts
index 01b02e457969be256167a5023e823eba0ccbbb1e..d2634a0697589f61b95660bc23714bf630e3d5b7 100644
--- a/dist/albatross-policy/albatross-policy.d.cts
+++ b/dist/albatross-policy/albatross-policy.d.cts
@@ -24,6 +24,10 @@ declare const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET = 12030755339.5289
  * The block height of the proof-of-stake migration.
  */
 declare const PROOF_OF_STAKE_MIGRATION_BLOCK = 3456000;
+/**
+ * The block height of the proof-of-stake migration in **Testnet**.
+ */
+declare const PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = 3032010;
 /**
  * The initial supply of the cryptocurrency, in Lunas.
  */
@@ -74,26 +78,33 @@ declare const TRANSACTION_VALIDITY_WINDOW_BLOCKS: number;
 declare const STAKING_CONTRACT_ADDRESS = "NQ77 0000 0000 0000 0000 0000 0000 0000 0001";
 declare const COINBASE_ADDRESS = "NQ81 C01N BASE 0000 0000 0000 0000 0000 0000";
 
+interface BaseOptions {
+    /**
+     * Whether to use the testnet block height for proof-of-stake migration.
+     * @default false
+     */
+    testnet?: boolean;
+}
 /**
  * Returns the epoch number for a given block number.
  */
-declare function epochAt(blockNumber: number): number;
+declare function epochAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the epoch index for a given block number.
  */
-declare function epochIndexAt(blockNumber: number): number;
+declare function epochIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch number for a given block number.
  */
-declare function batchAt(blockNumber: number): number;
+declare function batchAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch index for a given block number.
  */
-declare function batchIndexAt(blockNumber: number): number;
+declare function batchIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Checks if a given block number is a macro block.
  */
-declare function isMacroBlockAt(blockNumber: number): boolean;
+declare function isMacroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Checks if a given block number is an election block.
  */
@@ -101,23 +112,23 @@ declare function isElectionBlockAt(blockNumber: number): boolean;
 /**
  * Checks if a given block number is a micro block.
  */
-declare function isMicroBlockAt(blockNumber: number): boolean;
+declare function isMicroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Returns the next macro block number after the given block number.
  */
-declare function macroBlockAfter(blockNumber: number): number;
+declare function macroBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the last macro block number before the given block number.
  */
-declare function lastMacroBlock(blockNumber: number): number;
+declare function lastMacroBlock(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the next election block number after the given block number.
  */
-declare function electionBlockAfter(blockNumber: number): number;
+declare function electionBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the first block number of the given epoch.
  */
-declare function firstBlockOf(epoch: number): number | undefined;
+declare function firstBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Returns the block number after the jail period.
  */
@@ -125,7 +136,7 @@ declare function blockAfterJail(blockNumber: number): number;
 /**
  * Returns the election block number for a given epoch.
  */
-declare function electionBlockOf(epoch: number): number | undefined;
+declare function electionBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Calculates rewards penalty due to batch delay.
  */
@@ -143,4 +154,4 @@ declare function lastBlockOfReportingWindow(blockNumber: number): number;
  */
 declare function blockAfterReportingWindow(blockNumber: number): number;
 
-export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
+export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
diff --git a/dist/albatross-policy/albatross-policy.d.mts b/dist/albatross-policy/albatross-policy.d.mts
index 01b02e457969be256167a5023e823eba0ccbbb1e..d2634a0697589f61b95660bc23714bf630e3d5b7 100644
--- a/dist/albatross-policy/albatross-policy.d.mts
+++ b/dist/albatross-policy/albatross-policy.d.mts
@@ -24,6 +24,10 @@ declare const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET = 12030755339.5289
  * The block height of the proof-of-stake migration.
  */
 declare const PROOF_OF_STAKE_MIGRATION_BLOCK = 3456000;
+/**
+ * The block height of the proof-of-stake migration in **Testnet**.
+ */
+declare const PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = 3032010;
 /**
  * The initial supply of the cryptocurrency, in Lunas.
  */
@@ -74,26 +78,33 @@ declare const TRANSACTION_VALIDITY_WINDOW_BLOCKS: number;
 declare const STAKING_CONTRACT_ADDRESS = "NQ77 0000 0000 0000 0000 0000 0000 0000 0001";
 declare const COINBASE_ADDRESS = "NQ81 C01N BASE 0000 0000 0000 0000 0000 0000";
 
+interface BaseOptions {
+    /**
+     * Whether to use the testnet block height for proof-of-stake migration.
+     * @default false
+     */
+    testnet?: boolean;
+}
 /**
  * Returns the epoch number for a given block number.
  */
-declare function epochAt(blockNumber: number): number;
+declare function epochAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the epoch index for a given block number.
  */
-declare function epochIndexAt(blockNumber: number): number;
+declare function epochIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch number for a given block number.
  */
-declare function batchAt(blockNumber: number): number;
+declare function batchAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch index for a given block number.
  */
-declare function batchIndexAt(blockNumber: number): number;
+declare function batchIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Checks if a given block number is a macro block.
  */
-declare function isMacroBlockAt(blockNumber: number): boolean;
+declare function isMacroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Checks if a given block number is an election block.
  */
@@ -101,23 +112,23 @@ declare function isElectionBlockAt(blockNumber: number): boolean;
 /**
  * Checks if a given block number is a micro block.
  */
-declare function isMicroBlockAt(blockNumber: number): boolean;
+declare function isMicroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Returns the next macro block number after the given block number.
  */
-declare function macroBlockAfter(blockNumber: number): number;
+declare function macroBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the last macro block number before the given block number.
  */
-declare function lastMacroBlock(blockNumber: number): number;
+declare function lastMacroBlock(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the next election block number after the given block number.
  */
-declare function electionBlockAfter(blockNumber: number): number;
+declare function electionBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the first block number of the given epoch.
  */
-declare function firstBlockOf(epoch: number): number | undefined;
+declare function firstBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Returns the block number after the jail period.
  */
@@ -125,7 +136,7 @@ declare function blockAfterJail(blockNumber: number): number;
 /**
  * Returns the election block number for a given epoch.
  */
-declare function electionBlockOf(epoch: number): number | undefined;
+declare function electionBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Calculates rewards penalty due to batch delay.
  */
@@ -143,4 +154,4 @@ declare function lastBlockOfReportingWindow(blockNumber: number): number;
  */
 declare function blockAfterReportingWindow(blockNumber: number): number;
 
-export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
+export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
diff --git a/dist/albatross-policy/albatross-policy.d.ts b/dist/albatross-policy/albatross-policy.d.ts
index 01b02e457969be256167a5023e823eba0ccbbb1e..d2634a0697589f61b95660bc23714bf630e3d5b7 100644
--- a/dist/albatross-policy/albatross-policy.d.ts
+++ b/dist/albatross-policy/albatross-policy.d.ts
@@ -24,6 +24,10 @@ declare const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET = 12030755339.5289
  * The block height of the proof-of-stake migration.
  */
 declare const PROOF_OF_STAKE_MIGRATION_BLOCK = 3456000;
+/**
+ * The block height of the proof-of-stake migration in **Testnet**.
+ */
+declare const PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = 3032010;
 /**
  * The initial supply of the cryptocurrency, in Lunas.
  */
@@ -74,26 +78,33 @@ declare const TRANSACTION_VALIDITY_WINDOW_BLOCKS: number;
 declare const STAKING_CONTRACT_ADDRESS = "NQ77 0000 0000 0000 0000 0000 0000 0000 0001";
 declare const COINBASE_ADDRESS = "NQ81 C01N BASE 0000 0000 0000 0000 0000 0000";
 
+interface BaseOptions {
+    /**
+     * Whether to use the testnet block height for proof-of-stake migration.
+     * @default false
+     */
+    testnet?: boolean;
+}
 /**
  * Returns the epoch number for a given block number.
  */
-declare function epochAt(blockNumber: number): number;
+declare function epochAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the epoch index for a given block number.
  */
-declare function epochIndexAt(blockNumber: number): number;
+declare function epochIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch number for a given block number.
  */
-declare function batchAt(blockNumber: number): number;
+declare function batchAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the batch index for a given block number.
  */
-declare function batchIndexAt(blockNumber: number): number;
+declare function batchIndexAt(blockNumber: number, options?: BaseOptions): number;
 /**
  * Checks if a given block number is a macro block.
  */
-declare function isMacroBlockAt(blockNumber: number): boolean;
+declare function isMacroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Checks if a given block number is an election block.
  */
@@ -101,23 +112,23 @@ declare function isElectionBlockAt(blockNumber: number): boolean;
 /**
  * Checks if a given block number is a micro block.
  */
-declare function isMicroBlockAt(blockNumber: number): boolean;
+declare function isMicroBlockAt(blockNumber: number, options?: BaseOptions): boolean;
 /**
  * Returns the next macro block number after the given block number.
  */
-declare function macroBlockAfter(blockNumber: number): number;
+declare function macroBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the last macro block number before the given block number.
  */
-declare function lastMacroBlock(blockNumber: number): number;
+declare function lastMacroBlock(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the next election block number after the given block number.
  */
-declare function electionBlockAfter(blockNumber: number): number;
+declare function electionBlockAfter(blockNumber: number, options?: BaseOptions): number;
 /**
  * Returns the first block number of the given epoch.
  */
-declare function firstBlockOf(epoch: number): number | undefined;
+declare function firstBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Returns the block number after the jail period.
  */
@@ -125,7 +136,7 @@ declare function blockAfterJail(blockNumber: number): number;
 /**
  * Returns the election block number for a given epoch.
  */
-declare function electionBlockOf(epoch: number): number | undefined;
+declare function electionBlockOf(epoch: number, options?: BaseOptions): number | undefined;
 /**
  * Calculates rewards penalty due to batch delay.
  */
@@ -143,4 +154,4 @@ declare function lastBlockOfReportingWindow(blockNumber: number): number;
  */
 declare function blockAfterReportingWindow(blockNumber: number): number;
 
-export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
+export { BATCHES_PER_EPOCH, BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, BLOCK_SEPARATION_TIME, BLS_CACHE_MAX_CAPACITY, COINBASE_ADDRESS, F_PLUS_ONE, HISTORY_CHUNKS_MAX_SIZE, JAIL_EPOCHS, MAX_BASIC_TX_RECIPIENT_DATA_SIZE, MAX_MERKLE_PATH_SIZE, MAX_SIZE_MICRO_BODY, MAX_SUPPORTED_WEB_AUTH_SIZE, MAX_TX_RECIPIENT_DATA_SIZE, MAX_TX_SENDER_DATA_SIZE, MINIMUM_REWARDS_PERCENTAGE, MINIMUM_STAKE, MIN_EPOCHS_STORED, MIN_PRODUCER_TIMEOUT, POS_DECAY_PER_DAY, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET, PROOF_OF_STAKE_MIGRATION_DATE, PROOF_OF_WORK_EMISSION_SPEED, PROOF_OF_WORK_EMISSION_TAIL_REWARD, PROOF_OF_WORK_EMISSION_TAIL_START, PROOF_OF_WORK_INITIAL_SUPPLY, SLOTS, STAKING_CONTRACT_ADDRESS, STATE_CHUNKS_MAX_SIZE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, SUPPLY_DECAY, TENDERMINT_TIMEOUT_DELTA, TENDERMINT_TIMEOUT_INIT, TIMESTAMP_MAX_DRIFT, TOTAL_SUPPLY, TRANSACTION_VALIDITY_WINDOW, TRANSACTION_VALIDITY_WINDOW_BLOCKS, TWO_F_PLUS_ONE, VALIDATOR_DEPOSIT, VERSION, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
diff --git a/dist/albatross-policy/albatross-policy.mjs b/dist/albatross-policy/albatross-policy.mjs
index 741f246981bf8dc758a3d0baf122357d4cedfc60..1345aafde03415ac8092bc13eae26bcc7541c3de 100644
--- a/dist/albatross-policy/albatross-policy.mjs
+++ b/dist/albatross-policy/albatross-policy.mjs
@@ -1,60 +1,71 @@
-import { c as PROOF_OF_STAKE_MIGRATION_BLOCK, B as BLOCKS_PER_EPOCH, d as BLOCKS_PER_BATCH, J as JAIL_EPOCHS, M as MINIMUM_REWARDS_PERCENTAGE, e as BLOCKS_DELAY_DECAY } from '../shared/utils.CviVNm85.mjs';
-export { C as BATCHES_PER_EPOCH, s as BLOCK_SEPARATION_TIME, A as BLS_CACHE_MAX_CAPACITY, K as COINBASE_ADDRESS, F as F_PLUS_ONE, H as HISTORY_CHUNKS_MAX_SIZE, m as MAX_BASIC_TX_RECIPIENT_DATA_SIZE, n as MAX_MERKLE_PATH_SIZE, j as MAX_SIZE_MICRO_BODY, o as MAX_SUPPORTED_WEB_AUTH_SIZE, l as MAX_TX_RECIPIENT_DATA_SIZE, k as MAX_TX_SENDER_DATA_SIZE, y as MINIMUM_STAKE, v as MIN_EPOCHS_STORED, r as MIN_PRODUCER_TIMEOUT, b as POS_DECAY_PER_DAY, P as PROOF_OF_STAKE_MIGRATION_DATE, g as PROOF_OF_WORK_EMISSION_SPEED, i as PROOF_OF_WORK_EMISSION_TAIL_REWARD, h as PROOF_OF_WORK_EMISSION_TAIL_START, f as PROOF_OF_WORK_INITIAL_SUPPLY, p as SLOTS, I as STAKING_CONTRACT_ADDRESS, D as STATE_CHUNKS_MAX_SIZE, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, z as SUPPLY_DECAY, u as TENDERMINT_TIMEOUT_DELTA, t as TENDERMINT_TIMEOUT_INIT, w as TIMESTAMP_MAX_DRIFT, T as TOTAL_SUPPLY, E as TRANSACTION_VALIDITY_WINDOW, G as TRANSACTION_VALIDITY_WINDOW_BLOCKS, q as TWO_F_PLUS_ONE, x as VALIDATOR_DEPOSIT, V as VERSION } from '../shared/utils.CviVNm85.mjs';
+import { c as PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET, d as PROOF_OF_STAKE_MIGRATION_BLOCK, B as BLOCKS_PER_EPOCH, e as BLOCKS_PER_BATCH, J as JAIL_EPOCHS, M as MINIMUM_REWARDS_PERCENTAGE, f as BLOCKS_DELAY_DECAY } from '../shared/utils.B4WAHDTd.mjs';
+export { D as BATCHES_PER_EPOCH, t as BLOCK_SEPARATION_TIME, C as BLS_CACHE_MAX_CAPACITY, L as COINBASE_ADDRESS, F as F_PLUS_ONE, H as HISTORY_CHUNKS_MAX_SIZE, n as MAX_BASIC_TX_RECIPIENT_DATA_SIZE, o as MAX_MERKLE_PATH_SIZE, k as MAX_SIZE_MICRO_BODY, p as MAX_SUPPORTED_WEB_AUTH_SIZE, m as MAX_TX_RECIPIENT_DATA_SIZE, l as MAX_TX_SENDER_DATA_SIZE, z as MINIMUM_STAKE, w as MIN_EPOCHS_STORED, s as MIN_PRODUCER_TIMEOUT, b as POS_DECAY_PER_DAY, P as PROOF_OF_STAKE_MIGRATION_DATE, h as PROOF_OF_WORK_EMISSION_SPEED, j as PROOF_OF_WORK_EMISSION_TAIL_REWARD, i as PROOF_OF_WORK_EMISSION_TAIL_START, g as PROOF_OF_WORK_INITIAL_SUPPLY, q as SLOTS, K as STAKING_CONTRACT_ADDRESS, E as STATE_CHUNKS_MAX_SIZE, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, A as SUPPLY_DECAY, v as TENDERMINT_TIMEOUT_DELTA, u as TENDERMINT_TIMEOUT_INIT, x as TIMESTAMP_MAX_DRIFT, T as TOTAL_SUPPLY, G as TRANSACTION_VALIDITY_WINDOW, I as TRANSACTION_VALIDITY_WINDOW_BLOCKS, r as TWO_F_PLUS_ONE, y as VALIDATOR_DEPOSIT, V as VERSION } from '../shared/utils.B4WAHDTd.mjs';
 
-function epochAt(blockNumber) {
-  if (blockNumber <= PROOF_OF_STAKE_MIGRATION_BLOCK) return 0;
-  const offset = blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK;
+function epochAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber <= migrationBlock) return 0;
+  const offset = blockNumber - migrationBlock;
   return Math.floor((offset + BLOCKS_PER_EPOCH - 1) / BLOCKS_PER_EPOCH);
 }
-function epochIndexAt(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return blockNumber;
-  return (blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK) % BLOCKS_PER_EPOCH;
+function epochIndexAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return blockNumber;
+  return (blockNumber - migrationBlock) % BLOCKS_PER_EPOCH;
 }
-function batchAt(blockNumber) {
-  if (blockNumber <= PROOF_OF_STAKE_MIGRATION_BLOCK) return 0;
-  const offset = blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK;
+function batchAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber <= migrationBlock) return 0;
+  const offset = blockNumber - migrationBlock;
   return Math.floor((offset + BLOCKS_PER_BATCH - 1) / BLOCKS_PER_BATCH);
 }
-function batchIndexAt(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return blockNumber;
-  return (blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK) % BLOCKS_PER_BATCH;
+function batchIndexAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return blockNumber;
+  return (blockNumber - migrationBlock) % BLOCKS_PER_BATCH;
 }
-function isMacroBlockAt(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return false;
-  return batchIndexAt(blockNumber) === BLOCKS_PER_BATCH - 1;
+function isMacroBlockAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return false;
+  return batchIndexAt(blockNumber, options) === BLOCKS_PER_BATCH - 1;
 }
 function isElectionBlockAt(blockNumber) {
   return epochIndexAt(blockNumber) === BLOCKS_PER_EPOCH - 1;
 }
-function isMicroBlockAt(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return false;
-  return !isMacroBlockAt(blockNumber);
-}
-function macroBlockAfter(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return PROOF_OF_STAKE_MIGRATION_BLOCK;
-  const offset = blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return (Math.floor(offset / BLOCKS_PER_BATCH) + 1) * BLOCKS_PER_BATCH + PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function lastMacroBlock(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) throw new Error("No macro blocks before genesis");
-  const offset = blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return Math.floor(offset / BLOCKS_PER_BATCH) * BLOCKS_PER_BATCH + PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function electionBlockAfter(blockNumber) {
-  if (blockNumber < PROOF_OF_STAKE_MIGRATION_BLOCK) return PROOF_OF_STAKE_MIGRATION_BLOCK;
-  const offset = blockNumber - PROOF_OF_STAKE_MIGRATION_BLOCK;
-  return (Math.floor(offset / BLOCKS_PER_EPOCH) + 1) * BLOCKS_PER_EPOCH + PROOF_OF_STAKE_MIGRATION_BLOCK;
-}
-function firstBlockOf(epoch) {
+function isMicroBlockAt(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return false;
+  return !isMacroBlockAt(blockNumber, options);
+}
+function macroBlockAfter(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return migrationBlock;
+  const offset = blockNumber - migrationBlock;
+  return (Math.floor(offset / BLOCKS_PER_BATCH) + 1) * BLOCKS_PER_BATCH + migrationBlock;
+}
+function lastMacroBlock(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) throw new Error("No macro blocks before proof-of-stake migration");
+  const offset = blockNumber - migrationBlock;
+  return Math.floor(offset / BLOCKS_PER_BATCH) * BLOCKS_PER_BATCH + migrationBlock;
+}
+function electionBlockAfter(blockNumber, options = {}) {
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  if (blockNumber < migrationBlock) return migrationBlock;
+  const offset = blockNumber - migrationBlock;
+  return (Math.floor(offset / BLOCKS_PER_EPOCH) + 1) * BLOCKS_PER_EPOCH + migrationBlock;
+}
+function firstBlockOf(epoch, options = {}) {
   if (epoch <= 0) return undefined;
-  return (epoch - 1) * BLOCKS_PER_EPOCH + PROOF_OF_STAKE_MIGRATION_BLOCK + 1;
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  return (epoch - 1) * BLOCKS_PER_EPOCH + migrationBlock + 1;
 }
 function blockAfterJail(blockNumber) {
   return blockNumber + BLOCKS_PER_EPOCH * JAIL_EPOCHS + 1;
 }
-function electionBlockOf(epoch) {
+function electionBlockOf(epoch, options = {}) {
   if (epoch < 0) return undefined;
-  return PROOF_OF_STAKE_MIGRATION_BLOCK + (epoch + 1) * BLOCKS_PER_EPOCH - 1;
+  const migrationBlock = options.testnet ? PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET : PROOF_OF_STAKE_MIGRATION_BLOCK;
+  return migrationBlock + (epoch + 1) * BLOCKS_PER_EPOCH - 1;
 }
 function batchDelayPenalty(delayMs) {
   return (1 - MINIMUM_REWARDS_PERCENTAGE) * (BLOCKS_DELAY_DECAY ** delayMs) ** delayMs + MINIMUM_REWARDS_PERCENTAGE;
@@ -69,4 +80,4 @@ function blockAfterReportingWindow(blockNumber) {
   return lastBlockOfReportingWindow(blockNumber) + 1;
 }
 
-export { BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, JAIL_EPOCHS, MINIMUM_REWARDS_PERCENTAGE, PROOF_OF_STAKE_MIGRATION_BLOCK, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
+export { BLOCKS_DELAY_DECAY, BLOCKS_PER_BATCH, BLOCKS_PER_EPOCH, JAIL_EPOCHS, MINIMUM_REWARDS_PERCENTAGE, PROOF_OF_STAKE_MIGRATION_BLOCK, PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET, batchAt, batchDelayPenalty, batchIndexAt, blockAfterJail, blockAfterReportingWindow, electionBlockAfter, electionBlockOf, epochAt, epochIndexAt, firstBatchOfEpoch, firstBlockOf, isElectionBlockAt, isMacroBlockAt, isMicroBlockAt, lastBlockOfReportingWindow, lastMacroBlock, macroBlockAfter };
diff --git a/dist/rewards-calculator/rewards-calculator.cjs b/dist/rewards-calculator/rewards-calculator.cjs
index 577767cca983b5c98725fc552cb019f69c6b6af6..64eec51f02b9365361bfcf45374bc09f77448090 100644
--- a/dist/rewards-calculator/rewards-calculator.cjs
+++ b/dist/rewards-calculator/rewards-calculator.cjs
@@ -1,7 +1,7 @@
 'use strict';
 
-const pos = require('../shared/utils.C10-CJz4.cjs');
-const constants = require('../shared/utils.CGhj4cNk.cjs');
+const pos = require('../shared/utils.DrN2xFja.cjs');
+const constants = require('../shared/utils.BtI8VHas.cjs');
 
 function calculateStakingRewards(params) {
   const {
diff --git a/dist/rewards-calculator/rewards-calculator.mjs b/dist/rewards-calculator/rewards-calculator.mjs
index 1f26d038a984003d26198f0d89844228c25c49b2..05fd51a34f432e2e6645a41e6089f86a62b18cbb 100644
--- a/dist/rewards-calculator/rewards-calculator.mjs
+++ b/dist/rewards-calculator/rewards-calculator.mjs
@@ -1,5 +1,5 @@
-import { p as posSupplyAt } from '../shared/utils.CsKOXHuy.mjs';
-import { P as PROOF_OF_STAKE_MIGRATION_DATE, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, b as POS_DECAY_PER_DAY } from '../shared/utils.CviVNm85.mjs';
+import { p as posSupplyAt } from '../shared/utils.nycxPIuY.mjs';
+import { P as PROOF_OF_STAKE_MIGRATION_DATE, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, b as POS_DECAY_PER_DAY } from '../shared/utils.B4WAHDTd.mjs';
 
 function calculateStakingRewards(params) {
   const {
diff --git a/dist/shared/utils.CviVNm85.mjs b/dist/shared/utils.B4WAHDTd.mjs
similarity index 58%
rename from dist/shared/utils.CviVNm85.mjs
rename to dist/shared/utils.B4WAHDTd.mjs
index 9fd61e7cd9f6747e16381cfb85f17df0848d93b8..7e24530daccceed94e8ff6c9c6036e4fed219c84 100644
--- a/dist/shared/utils.CviVNm85.mjs
+++ b/dist/shared/utils.B4WAHDTd.mjs
@@ -3,6 +3,7 @@ const PROOF_OF_STAKE_MIGRATION_DATE = /* @__PURE__ */ new Date("2024-11-19");
 const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE = 1289310965406244e-5;
 const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET = 1203075533952899e-5;
 const PROOF_OF_STAKE_MIGRATION_BLOCK = 3456e3;
+const PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = 3032010;
 const PROOF_OF_WORK_INITIAL_SUPPLY = 252e12;
 const PROOF_OF_WORK_EMISSION_SPEED = 4194304;
 const PROOF_OF_WORK_EMISSION_TAIL_START = 48692960;
@@ -41,4 +42,4 @@ const TRANSACTION_VALIDITY_WINDOW_BLOCKS = TRANSACTION_VALIDITY_WINDOW * BLOCKS_
 const STAKING_CONTRACT_ADDRESS = "NQ77 0000 0000 0000 0000 0000 0000 0000 0001";
 const COINBASE_ADDRESS = "NQ81 C01N BASE 0000 0000 0000 0000 0000 0000";
 
-export { BLS_CACHE_MAX_CAPACITY as A, BLOCKS_PER_EPOCH as B, BATCHES_PER_EPOCH as C, STATE_CHUNKS_MAX_SIZE as D, TRANSACTION_VALIDITY_WINDOW as E, F_PLUS_ONE as F, TRANSACTION_VALIDITY_WINDOW_BLOCKS as G, HISTORY_CHUNKS_MAX_SIZE as H, STAKING_CONTRACT_ADDRESS as I, JAIL_EPOCHS as J, COINBASE_ADDRESS as K, MINIMUM_REWARDS_PERCENTAGE as M, PROOF_OF_STAKE_MIGRATION_DATE as P, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET as S, TOTAL_SUPPLY as T, VERSION as V, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE as a, POS_DECAY_PER_DAY as b, PROOF_OF_STAKE_MIGRATION_BLOCK as c, BLOCKS_PER_BATCH as d, BLOCKS_DELAY_DECAY as e, PROOF_OF_WORK_INITIAL_SUPPLY as f, PROOF_OF_WORK_EMISSION_SPEED as g, PROOF_OF_WORK_EMISSION_TAIL_START as h, PROOF_OF_WORK_EMISSION_TAIL_REWARD as i, MAX_SIZE_MICRO_BODY as j, MAX_TX_SENDER_DATA_SIZE as k, MAX_TX_RECIPIENT_DATA_SIZE as l, MAX_BASIC_TX_RECIPIENT_DATA_SIZE as m, MAX_MERKLE_PATH_SIZE as n, MAX_SUPPORTED_WEB_AUTH_SIZE as o, SLOTS as p, TWO_F_PLUS_ONE as q, MIN_PRODUCER_TIMEOUT as r, BLOCK_SEPARATION_TIME as s, TENDERMINT_TIMEOUT_INIT as t, TENDERMINT_TIMEOUT_DELTA as u, MIN_EPOCHS_STORED as v, TIMESTAMP_MAX_DRIFT as w, VALIDATOR_DEPOSIT as x, MINIMUM_STAKE as y, SUPPLY_DECAY as z };
+export { SUPPLY_DECAY as A, BLOCKS_PER_EPOCH as B, BLS_CACHE_MAX_CAPACITY as C, BATCHES_PER_EPOCH as D, STATE_CHUNKS_MAX_SIZE as E, F_PLUS_ONE as F, TRANSACTION_VALIDITY_WINDOW as G, HISTORY_CHUNKS_MAX_SIZE as H, TRANSACTION_VALIDITY_WINDOW_BLOCKS as I, JAIL_EPOCHS as J, STAKING_CONTRACT_ADDRESS as K, COINBASE_ADDRESS as L, MINIMUM_REWARDS_PERCENTAGE as M, PROOF_OF_STAKE_MIGRATION_DATE as P, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET as S, TOTAL_SUPPLY as T, VERSION as V, SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE as a, POS_DECAY_PER_DAY as b, PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET as c, PROOF_OF_STAKE_MIGRATION_BLOCK as d, BLOCKS_PER_BATCH as e, BLOCKS_DELAY_DECAY as f, PROOF_OF_WORK_INITIAL_SUPPLY as g, PROOF_OF_WORK_EMISSION_SPEED as h, PROOF_OF_WORK_EMISSION_TAIL_START as i, PROOF_OF_WORK_EMISSION_TAIL_REWARD as j, MAX_SIZE_MICRO_BODY as k, MAX_TX_SENDER_DATA_SIZE as l, MAX_TX_RECIPIENT_DATA_SIZE as m, MAX_BASIC_TX_RECIPIENT_DATA_SIZE as n, MAX_MERKLE_PATH_SIZE as o, MAX_SUPPORTED_WEB_AUTH_SIZE as p, SLOTS as q, TWO_F_PLUS_ONE as r, MIN_PRODUCER_TIMEOUT as s, BLOCK_SEPARATION_TIME as t, TENDERMINT_TIMEOUT_INIT as u, TENDERMINT_TIMEOUT_DELTA as v, MIN_EPOCHS_STORED as w, TIMESTAMP_MAX_DRIFT as x, VALIDATOR_DEPOSIT as y, MINIMUM_STAKE as z };
diff --git a/dist/shared/utils.CGhj4cNk.cjs b/dist/shared/utils.BtI8VHas.cjs
similarity index 96%
rename from dist/shared/utils.CGhj4cNk.cjs
rename to dist/shared/utils.BtI8VHas.cjs
index f4a4f54b9b4b0e973526c2f5ef705476f4e40022..57c39d11aca58c3a0af95d98ef390b028f46bc27 100644
--- a/dist/shared/utils.CGhj4cNk.cjs
+++ b/dist/shared/utils.BtI8VHas.cjs
@@ -5,6 +5,7 @@ const PROOF_OF_STAKE_MIGRATION_DATE = /* @__PURE__ */ new Date("2024-11-19");
 const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE = 1289310965406244e-5;
 const SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET = 1203075533952899e-5;
 const PROOF_OF_STAKE_MIGRATION_BLOCK = 3456e3;
+const PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = 3032010;
 const PROOF_OF_WORK_INITIAL_SUPPLY = 252e12;
 const PROOF_OF_WORK_EMISSION_SPEED = 4194304;
 const PROOF_OF_WORK_EMISSION_TAIL_START = 48692960;
@@ -65,6 +66,7 @@ exports.MIN_EPOCHS_STORED = MIN_EPOCHS_STORED;
 exports.MIN_PRODUCER_TIMEOUT = MIN_PRODUCER_TIMEOUT;
 exports.POS_DECAY_PER_DAY = POS_DECAY_PER_DAY;
 exports.PROOF_OF_STAKE_MIGRATION_BLOCK = PROOF_OF_STAKE_MIGRATION_BLOCK;
+exports.PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET = PROOF_OF_STAKE_MIGRATION_BLOCK_TESTNET;
 exports.PROOF_OF_STAKE_MIGRATION_DATE = PROOF_OF_STAKE_MIGRATION_DATE;
 exports.PROOF_OF_WORK_EMISSION_SPEED = PROOF_OF_WORK_EMISSION_SPEED;
 exports.PROOF_OF_WORK_EMISSION_TAIL_REWARD = PROOF_OF_WORK_EMISSION_TAIL_REWARD;
diff --git a/dist/shared/utils.C10-CJz4.cjs b/dist/shared/utils.DrN2xFja.cjs
similarity index 94%
rename from dist/shared/utils.C10-CJz4.cjs
rename to dist/shared/utils.DrN2xFja.cjs
index 553d22ba35e8a08bfc8219754aae8d1784695b83..2354a741124dcf39a02c5e9554d5e7342d259120 100644
--- a/dist/shared/utils.C10-CJz4.cjs
+++ b/dist/shared/utils.DrN2xFja.cjs
@@ -1,6 +1,6 @@
 'use strict';
 
-const constants = require('./utils.CGhj4cNk.cjs');
+const constants = require('./utils.BtI8VHas.cjs');
 
 function powi(x, n) {
   if (n < 0) {
diff --git a/dist/shared/utils.CsKOXHuy.mjs b/dist/shared/utils.nycxPIuY.mjs
similarity index 91%
rename from dist/shared/utils.CsKOXHuy.mjs
rename to dist/shared/utils.nycxPIuY.mjs
index 4cc45b3c12eb22dad8e35e94a54ca3714284e716..6542b09aa73616815d320524a081026bae91a564 100644
--- a/dist/shared/utils.CsKOXHuy.mjs
+++ b/dist/shared/utils.nycxPIuY.mjs
@@ -1,4 +1,4 @@
-import { P as PROOF_OF_STAKE_MIGRATION_DATE, T as TOTAL_SUPPLY, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, z as SUPPLY_DECAY } from './utils.CviVNm85.mjs';
+import { P as PROOF_OF_STAKE_MIGRATION_DATE, T as TOTAL_SUPPLY, S as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE_TESTNET, a as SUPPLY_AT_PROOF_OF_STAKE_MIGRATION_DATE, A as SUPPLY_DECAY } from './utils.B4WAHDTd.mjs';
 
 function powi(x, n) {
   if (n < 0) {
diff --git a/dist/supply-calculator/supply-calculator.cjs b/dist/supply-calculator/supply-calculator.cjs
index 0652d06f7f90ffcc2d5e229f6367507f7037a687..cc1c04d0826905a06f61a71c07fef41abfeef21c 100644
--- a/dist/supply-calculator/supply-calculator.cjs
+++ b/dist/supply-calculator/supply-calculator.cjs
@@ -1,7 +1,7 @@
 'use strict';
 
-const pos = require('../shared/utils.C10-CJz4.cjs');
-const constants = require('../shared/utils.CGhj4cNk.cjs');
+const pos = require('../shared/utils.DrN2xFja.cjs');
+const constants = require('../shared/utils.BtI8VHas.cjs');
 
 function _powBlockRewardAt(currentSupply, blockHeight) {
   if (blockHeight <= 0) return 0;
diff --git a/dist/supply-calculator/supply-calculator.mjs b/dist/supply-calculator/supply-calculator.mjs
index 275a4554d95493b1c60c144dbec47028f3119575..4dddc0256f4d646c21a5c24106e9a32655612d59 100644
--- a/dist/supply-calculator/supply-calculator.mjs
+++ b/dist/supply-calculator/supply-calculator.mjs
@@ -1,5 +1,5 @@
-export { p as posSupplyAt, a as powi } from '../shared/utils.CsKOXHuy.mjs';
-import { c as PROOF_OF_STAKE_MIGRATION_BLOCK, P as PROOF_OF_STAKE_MIGRATION_DATE, f as PROOF_OF_WORK_INITIAL_SUPPLY, h as PROOF_OF_WORK_EMISSION_TAIL_START, i as PROOF_OF_WORK_EMISSION_TAIL_REWARD, g as PROOF_OF_WORK_EMISSION_SPEED } from '../shared/utils.CviVNm85.mjs';
+export { p as posSupplyAt, a as powi } from '../shared/utils.nycxPIuY.mjs';
+import { d as PROOF_OF_STAKE_MIGRATION_BLOCK, P as PROOF_OF_STAKE_MIGRATION_DATE, g as PROOF_OF_WORK_INITIAL_SUPPLY, i as PROOF_OF_WORK_EMISSION_TAIL_START, j as PROOF_OF_WORK_EMISSION_TAIL_REWARD, h as PROOF_OF_WORK_EMISSION_SPEED } from '../shared/utils.B4WAHDTd.mjs';
 
 function _powBlockRewardAt(currentSupply, blockHeight) {
   if (blockHeight <= 0) return 0;
